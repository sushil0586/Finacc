# Generated by Django 4.2.28 on 2026-02-27 06:11

from decimal import Decimal
from django.conf import settings
from django.db import migrations, models
import django.db.models.deletion
import django.utils.timezone


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
        ('entity', '0001_initial'),
        ('catalog', '__first__'),
        ('financial', '0001_initial'),
    ]

    operations = [
        migrations.CreateModel(
            name='SalesEWayBillDetails',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(default=django.utils.timezone.now, editable=False)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('is_active', models.BooleanField(db_index=True, default=True)),
                ('status', models.PositiveSmallIntegerField(choices=[(0, 'Not Applicable'), (1, 'Pending'), (2, 'Generated'), (3, 'Cancelled'), (9, 'Failed')], default=0)),
                ('generated_via_irp', models.BooleanField(default=False)),
                ('eway_bill_no', models.CharField(blank=True, default='', max_length=50)),
                ('eway_bill_date', models.DateTimeField(blank=True, null=True)),
                ('valid_upto', models.DateTimeField(blank=True, null=True)),
                ('transporter_id', models.CharField(blank=True, default='', max_length=20)),
                ('transporter_name', models.CharField(blank=True, default='', max_length=255)),
                ('transport_mode', models.PositiveSmallIntegerField(blank=True, choices=[(1, 'Road'), (2, 'Rail'), (3, 'Air'), (4, 'Ship')], null=True)),
                ('distance_km', models.PositiveIntegerField(blank=True, null=True)),
                ('transport_doc_no', models.CharField(blank=True, default='', max_length=50)),
                ('transport_doc_date', models.DateField(blank=True, null=True)),
                ('from_place', models.CharField(blank=True, default='', max_length=100)),
                ('from_pincode', models.CharField(blank=True, default='', max_length=10)),
                ('vehicle_no', models.CharField(blank=True, default='', max_length=20)),
                ('vehicle_type', models.PositiveSmallIntegerField(blank=True, choices=[(1, 'Regular'), (2, 'ODC')], null=True)),
                ('cancelled_at', models.DateTimeField(blank=True, null=True)),
                ('cancel_reason_code', models.CharField(blank=True, default='', max_length=10)),
                ('cancel_remarks', models.CharField(blank=True, default='', max_length=255)),
                ('last_vehicle_update_at', models.DateTimeField(blank=True, null=True)),
                ('original_valid_upto', models.DateTimeField(blank=True, null=True)),
                ('current_valid_upto', models.DateTimeField(blank=True, null=True)),
                ('extension_count', models.PositiveIntegerField(default=0)),
                ('last_extension_at', models.DateTimeField(blank=True, null=True)),
                ('last_extension_reason_code', models.CharField(blank=True, default='', max_length=10)),
                ('last_extension_remarks', models.CharField(blank=True, default='', max_length=255)),
                ('last_extension_from_place', models.CharField(blank=True, default='', max_length=100)),
                ('last_extension_from_pincode', models.CharField(blank=True, default='', max_length=10)),
                ('last_transporter_update_at', models.DateTimeField(blank=True, null=True)),
                ('request_payload', models.JSONField(blank=True, null=True)),
                ('response_payload', models.JSONField(blank=True, null=True)),
                ('last_error', models.JSONField(blank=True, null=True)),
                ('created_by', models.ForeignKey(blank=True, editable=False, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='%(class)s_created', to=settings.AUTH_USER_MODEL)),
                ('entity', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='%(class)s_entity', to='entity.entity')),
                ('entityfinid', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='%(class)s_entityfin', to='entity.entityfinancialyear')),
            ],
            options={
                'db_table': 'sales_eway_details',
            },
        ),
        migrations.CreateModel(
            name='SalesInvoiceHeader',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(default=django.utils.timezone.now, editable=False)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('is_active', models.BooleanField(db_index=True, default=True)),
                ('doc_type', models.PositiveSmallIntegerField(choices=[(1, 'Tax Invoice'), (2, 'Credit Note'), (3, 'Debit Note')], default=1)),
                ('status', models.PositiveSmallIntegerField(choices=[(1, 'Draft'), (2, 'Confirmed'), (3, 'Posted'), (9, 'Cancelled')], default=1)),
                ('bill_date', models.DateField(default=django.utils.timezone.localdate)),
                ('posting_date', models.DateField(blank=True, null=True)),
                ('doc_code', models.CharField(max_length=20)),
                ('doc_no', models.PositiveIntegerField(blank=True, db_index=True, null=True)),
                ('invoice_number', models.CharField(blank=True, db_index=True, max_length=50, null=True)),
                ('customer_name', models.CharField(max_length=255)),
                ('customer_gstin', models.CharField(blank=True, default='', max_length=20)),
                ('customer_state_code', models.CharField(blank=True, default='', max_length=2)),
                ('seller_gstin', models.CharField(blank=True, default='', max_length=20)),
                ('seller_state_code', models.CharField(blank=True, default='', max_length=2)),
                ('is_bill_to_ship_to_same', models.BooleanField(default=True)),
                ('bill_to_address1', models.CharField(blank=True, default='', max_length=255)),
                ('bill_to_address2', models.CharField(blank=True, default='', max_length=255)),
                ('bill_to_city', models.CharField(blank=True, default='', max_length=100)),
                ('bill_to_state_code', models.CharField(blank=True, default='', max_length=2)),
                ('bill_to_pincode', models.CharField(blank=True, default='', max_length=10)),
                ('ship_to_address1', models.CharField(blank=True, default='', max_length=255)),
                ('ship_to_address2', models.CharField(blank=True, default='', max_length=255)),
                ('ship_to_city', models.CharField(blank=True, default='', max_length=100)),
                ('ship_to_state_code', models.CharField(blank=True, default='', max_length=2)),
                ('ship_to_pincode', models.CharField(blank=True, default='', max_length=10)),
                ('place_of_supply_state_code', models.CharField(blank=True, default='', max_length=2)),
                ('supply_category', models.PositiveSmallIntegerField(choices=[(1, 'Domestic B2B'), (2, 'Domestic B2C'), (3, 'Export with IGST'), (4, 'Export without IGST (LUT)'), (5, 'SEZ with IGST'), (6, 'SEZ without IGST'), (7, 'Deemed Export')], default=1)),
                ('taxability', models.PositiveSmallIntegerField(choices=[(1, 'Taxable'), (2, 'Exempt'), (3, 'Nil-rated'), (4, 'Non-GST')], default=1)),
                ('tax_regime', models.PositiveSmallIntegerField(choices=[(1, 'Intra-state (CGST+SGST)'), (2, 'Inter-state (IGST)')], default=1)),
                ('is_igst', models.BooleanField(default=False)),
                ('is_reverse_charge', models.BooleanField(default=False)),
                ('credit_days', models.PositiveIntegerField(default=0)),
                ('due_date', models.DateField(blank=True, null=True)),
                ('gst_compliance_mode', models.PositiveSmallIntegerField(choices=[(0, 'None'), (1, 'E-Invoice only'), (2, 'E-Way only'), (3, 'E-Invoice + E-Way')], default=0)),
                ('is_einvoice_applicable', models.BooleanField(default=False)),
                ('is_eway_applicable', models.BooleanField(default=False)),
                ('total_taxable_value', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=18)),
                ('total_cgst', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=18)),
                ('total_sgst', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=18)),
                ('total_igst', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=18)),
                ('total_cess', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=18)),
                ('total_discount', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=18)),
                ('total_other_charges', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=18)),
                ('round_off', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=18)),
                ('grand_total', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=18)),
                ('reference', models.CharField(blank=True, default='', max_length=255)),
                ('remarks', models.TextField(blank=True, default='')),
                ('confirmed_at', models.DateTimeField(blank=True, editable=False, null=True)),
                ('posted_at', models.DateTimeField(blank=True, editable=False, null=True)),
                ('cancelled_at', models.DateTimeField(blank=True, editable=False, null=True)),
                ('cancelled_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='sales_cancelled', to=settings.AUTH_USER_MODEL)),
                ('confirmed_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='sales_confirmed', to=settings.AUTH_USER_MODEL)),
                ('created_by', models.ForeignKey(blank=True, editable=False, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='%(class)s_created', to=settings.AUTH_USER_MODEL)),
                ('customer', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='sales_invoices', to='financial.account')),
                ('entity', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='%(class)s_entity', to='entity.entity')),
                ('entityfinid', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='%(class)s_entityfin', to='entity.entityfinancialyear')),
                ('posted_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='sales_posted', to=settings.AUTH_USER_MODEL)),
                ('subentity', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='%(class)s_SubEntity', to='entity.subentity')),
                ('updated_by', models.ForeignKey(blank=True, editable=False, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='%(class)s_updated', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'db_table': 'sales_invoice_header',
            },
        ),
        migrations.CreateModel(
            name='SalesSettings',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(default=django.utils.timezone.now, editable=False)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('is_active', models.BooleanField(db_index=True, default=True)),
                ('default_doc_code_invoice', models.CharField(default='SINV', max_length=10)),
                ('default_doc_code_cn', models.CharField(default='SCN', max_length=10)),
                ('default_doc_code_dn', models.CharField(default='SDN', max_length=10)),
                ('default_workflow_action', models.CharField(choices=[('draft', 'Save as Draft'), ('confirm', 'Auto Confirm on Save'), ('post', 'Auto Post on Save')], db_index=True, default='draft', max_length=10)),
                ('auto_derive_tax_regime', models.BooleanField(default=True)),
                ('allow_mixed_taxability_in_one_invoice', models.BooleanField(default=True)),
                ('enable_einvoice', models.BooleanField(default=True)),
                ('enable_eway', models.BooleanField(default=True)),
                ('auto_generate_einvoice_on_confirm', models.BooleanField(default=False)),
                ('auto_generate_einvoice_on_post', models.BooleanField(default=False)),
                ('auto_generate_eway_on_confirm', models.BooleanField(default=False)),
                ('auto_generate_eway_on_post', models.BooleanField(default=False)),
                ('prefer_irp_generate_einvoice_and_eway_together', models.BooleanField(default=True)),
                ('round_grand_total_to', models.PositiveSmallIntegerField(default=2)),
                ('enable_round_off', models.BooleanField(default=True)),
                ('created_by', models.ForeignKey(blank=True, editable=False, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='%(class)s_created', to=settings.AUTH_USER_MODEL)),
                ('entity', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='sales_sales_settings', to='entity.entity')),
                ('entityfinid', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='%(class)s_entityfin', to='entity.entityfinancialyear')),
                ('subentity', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='sales_sales_settings_scope', to='entity.subentity')),
                ('updated_by', models.ForeignKey(blank=True, editable=False, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='%(class)s_updated', to=settings.AUTH_USER_MODEL)),
            ],
        ),
        migrations.CreateModel(
            name='SalesLockPeriod',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(default=django.utils.timezone.now, editable=False)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('is_active', models.BooleanField(db_index=True, default=True)),
                ('lock_date', models.DateField()),
                ('reason', models.CharField(blank=True, max_length=200, null=True)),
                ('created_by', models.ForeignKey(blank=True, editable=False, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='%(class)s_created', to=settings.AUTH_USER_MODEL)),
                ('entity', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, to='entity.entity')),
                ('entityfinid', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='%(class)s_entityfin', to='entity.entityfinancialyear')),
                ('subentity', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, to='entity.subentity')),
                ('updated_by', models.ForeignKey(blank=True, editable=False, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='%(class)s_updated', to=settings.AUTH_USER_MODEL)),
            ],
        ),
        migrations.CreateModel(
            name='SalesInvoiceLine',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(default=django.utils.timezone.now, editable=False)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('is_active', models.BooleanField(db_index=True, default=True)),
                ('line_no', models.PositiveIntegerField(default=1)),
                ('hsn_sac_code', models.CharField(blank=True, default='', max_length=20)),
                ('is_service', models.BooleanField(default=False)),
                ('qty', models.DecimalField(decimal_places=3, default=Decimal('0.000'), max_digits=18)),
                ('free_qty', models.DecimalField(decimal_places=3, default=Decimal('0.000'), max_digits=18)),
                ('rate', models.DecimalField(decimal_places=4, default=Decimal('0.0000'), max_digits=18)),
                ('is_rate_inclusive_of_tax', models.BooleanField(default=False)),
                ('discount_type', models.PositiveSmallIntegerField(choices=[(0, 'None'), (1, 'Percent'), (2, 'Amount')], default=0)),
                ('discount_percent', models.DecimalField(decimal_places=4, default=Decimal('0.0000'), max_digits=9)),
                ('discount_amount', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=18)),
                ('gst_rate', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=6)),
                ('cess_percent', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=6)),
                ('cess_amount', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=18)),
                ('taxable_value', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=18)),
                ('cgst_amount', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=18)),
                ('sgst_amount', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=18)),
                ('igst_amount', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=18)),
                ('line_total', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=18)),
                ('created_by', models.ForeignKey(blank=True, editable=False, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='%(class)s_created', to=settings.AUTH_USER_MODEL)),
                ('entity', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='%(class)s_entity', to='entity.entity')),
                ('entityfinid', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='%(class)s_entityfin', to='entity.entityfinancialyear')),
                ('header', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='lines', to='sales.salesinvoiceheader')),
                ('product', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='sales_lines', to='catalog.product')),
                ('sales_account', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='sales_invoice_lines', to='financial.account')),
                ('subentity', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='%(class)s_SubEntity', to='entity.subentity')),
                ('uom', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='sales_lines', to='catalog.unitofmeasure')),
                ('updated_by', models.ForeignKey(blank=True, editable=False, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='%(class)s_updated', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'db_table': 'sales_invoice_line',
            },
        ),
        migrations.CreateModel(
            name='SalesEWayEvent',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(default=django.utils.timezone.now, editable=False)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('is_active', models.BooleanField(db_index=True, default=True)),
                ('event_type', models.PositiveSmallIntegerField(choices=[(1, 'Generate'), (2, 'Extend Validity'), (3, 'Vehicle Update'), (4, 'Transporter Update'), (5, 'Cancel')])),
                ('event_at', models.DateTimeField(default=django.utils.timezone.now)),
                ('eway_bill_no', models.CharField(blank=True, default='', max_length=50)),
                ('reference_no', models.CharField(blank=True, default='', max_length=50)),
                ('is_success', models.BooleanField(default=False)),
                ('error_code', models.CharField(blank=True, default='', max_length=50)),
                ('error_message', models.TextField(blank=True, default='')),
                ('request_payload', models.JSONField(blank=True, null=True)),
                ('response_payload', models.JSONField(blank=True, null=True)),
                ('created_by', models.ForeignKey(blank=True, editable=False, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='%(class)s_created', to=settings.AUTH_USER_MODEL)),
                ('entity', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='%(class)s_entity', to='entity.entity')),
                ('entityfinid', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='%(class)s_entityfin', to='entity.entityfinancialyear')),
                ('eway', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='events', to='sales.salesewaybilldetails')),
                ('subentity', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='%(class)s_SubEntity', to='entity.subentity')),
                ('updated_by', models.ForeignKey(blank=True, editable=False, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='%(class)s_updated', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'db_table': 'sales_eway_event',
            },
        ),
        migrations.AddField(
            model_name='salesewaybilldetails',
            name='header',
            field=models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='eway', to='sales.salesinvoiceheader'),
        ),
        migrations.AddField(
            model_name='salesewaybilldetails',
            name='subentity',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='%(class)s_SubEntity', to='entity.subentity'),
        ),
        migrations.AddField(
            model_name='salesewaybilldetails',
            name='updated_by',
            field=models.ForeignKey(blank=True, editable=False, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='%(class)s_updated', to=settings.AUTH_USER_MODEL),
        ),
        migrations.CreateModel(
            name='SalesEInvoiceDetails',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(default=django.utils.timezone.now, editable=False)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('is_active', models.BooleanField(db_index=True, default=True)),
                ('status', models.PositiveSmallIntegerField(choices=[(0, 'Not Applicable'), (1, 'Pending'), (2, 'Generated'), (3, 'Cancelled'), (9, 'Failed')], default=0)),
                ('irn', models.CharField(blank=True, default='', max_length=100)),
                ('ack_no', models.CharField(blank=True, default='', max_length=50)),
                ('ack_date', models.DateTimeField(blank=True, null=True)),
                ('signed_invoice', models.TextField(blank=True, default='')),
                ('signed_qr_code', models.TextField(blank=True, default='')),
                ('generated_at', models.DateTimeField(blank=True, null=True)),
                ('cancelled_at', models.DateTimeField(blank=True, null=True)),
                ('cancel_reason_code', models.CharField(blank=True, default='', max_length=10)),
                ('cancel_remarks', models.CharField(blank=True, default='', max_length=255)),
                ('request_payload', models.JSONField(blank=True, null=True)),
                ('response_payload', models.JSONField(blank=True, null=True)),
                ('last_error', models.JSONField(blank=True, null=True)),
                ('created_by', models.ForeignKey(blank=True, editable=False, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='%(class)s_created', to=settings.AUTH_USER_MODEL)),
                ('entity', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='%(class)s_entity', to='entity.entity')),
                ('entityfinid', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='%(class)s_entityfin', to='entity.entityfinancialyear')),
                ('header', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='einvoice', to='sales.salesinvoiceheader')),
                ('subentity', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='%(class)s_SubEntity', to='entity.subentity')),
                ('updated_by', models.ForeignKey(blank=True, editable=False, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='%(class)s_updated', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'db_table': 'sales_einvoice_details',
            },
        ),
        migrations.CreateModel(
            name='SalesChoiceOverride',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(default=django.utils.timezone.now, editable=False)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('is_active', models.BooleanField(db_index=True, default=True)),
                ('choice_group', models.CharField(max_length=50)),
                ('choice_key', models.CharField(max_length=50)),
                ('is_enabled', models.BooleanField(default=True)),
                ('override_label', models.CharField(blank=True, max_length=200, null=True)),
                ('created_by', models.ForeignKey(blank=True, editable=False, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='%(class)s_created', to=settings.AUTH_USER_MODEL)),
                ('entity', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, to='entity.entity')),
                ('subentity', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, to='entity.subentity')),
                ('updated_by', models.ForeignKey(blank=True, editable=False, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='%(class)s_updated', to=settings.AUTH_USER_MODEL)),
            ],
        ),
        migrations.CreateModel(
            name='SalesTaxSummary',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(default=django.utils.timezone.now, editable=False)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('is_active', models.BooleanField(db_index=True, default=True)),
                ('taxability', models.PositiveSmallIntegerField(choices=[(1, 'Taxable'), (2, 'Exempt'), (3, 'Nil-rated'), (4, 'Non-GST')])),
                ('hsn_sac_code', models.CharField(blank=True, default='', max_length=20)),
                ('is_service', models.BooleanField(default=False)),
                ('gst_rate', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=6)),
                ('is_reverse_charge', models.BooleanField(default=False)),
                ('taxable_value', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=18)),
                ('cgst_amount', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=18)),
                ('sgst_amount', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=18)),
                ('igst_amount', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=18)),
                ('cess_amount', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=18)),
                ('created_by', models.ForeignKey(blank=True, editable=False, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='%(class)s_created', to=settings.AUTH_USER_MODEL)),
                ('entity', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='%(class)s_entity', to='entity.entity')),
                ('entityfinid', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='%(class)s_entityfin', to='entity.entityfinancialyear')),
                ('header', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='tax_summaries', to='sales.salesinvoiceheader')),
                ('subentity', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='%(class)s_SubEntity', to='entity.subentity')),
                ('updated_by', models.ForeignKey(blank=True, editable=False, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='%(class)s_updated', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'db_table': 'sales_tax_summary',
                'indexes': [models.Index(fields=['header'], name='ix_sales_taxsum_hdr'), models.Index(fields=['entity', 'entityfinid', 'subentity', 'gst_rate'], name='ix_sales_taxsum_rate'), models.Index(fields=['entity', 'entityfinid', 'subentity', 'hsn_sac_code'], name='ix_sales_taxsum_hsn')],
            },
        ),
        migrations.AddConstraint(
            model_name='salestaxsummary',
            constraint=models.UniqueConstraint(fields=('header', 'taxability', 'hsn_sac_code', 'is_service', 'gst_rate', 'is_reverse_charge'), name='uq_sales_taxsum_bucket'),
        ),
        migrations.AddIndex(
            model_name='salessettings',
            index=models.Index(fields=['entity'], name='ix_sales_settings_entity'),
        ),
        migrations.AddIndex(
            model_name='salessettings',
            index=models.Index(fields=['entity', 'subentity'], name='ix_sales_settings_scope'),
        ),
        migrations.AddConstraint(
            model_name='salessettings',
            constraint=models.UniqueConstraint(fields=('entity', 'subentity'), name='uq_sales_settings_entity_subentity'),
        ),
        migrations.AddIndex(
            model_name='saleslockperiod',
            index=models.Index(fields=['entity', 'subentity', 'lock_date'], name='ix_sales_lock_period'),
        ),
        migrations.AddIndex(
            model_name='salesinvoiceline',
            index=models.Index(fields=['header'], name='ix_sales_line_hdr'),
        ),
        migrations.AddIndex(
            model_name='salesinvoiceline',
            index=models.Index(fields=['entity', 'entityfinid', 'subentity', 'product'], name='ix_sales_line_product'),
        ),
        migrations.AddIndex(
            model_name='salesinvoiceline',
            index=models.Index(fields=['entity', 'entityfinid', 'subentity', 'hsn_sac_code'], name='ix_sales_line_hsn'),
        ),
        migrations.AddConstraint(
            model_name='salesinvoiceline',
            constraint=models.UniqueConstraint(fields=('header', 'line_no'), name='uq_sales_line_hdr_lineno'),
        ),
        migrations.AddIndex(
            model_name='salesinvoiceheader',
            index=models.Index(fields=['entity', 'entityfinid', 'subentity', 'bill_date'], name='ix_sales_hdr_billdt'),
        ),
        migrations.AddIndex(
            model_name='salesinvoiceheader',
            index=models.Index(fields=['entity', 'entityfinid', 'subentity', 'posting_date'], name='ix_sales_hdr_postdt'),
        ),
        migrations.AddIndex(
            model_name='salesinvoiceheader',
            index=models.Index(fields=['entity', 'entityfinid', 'subentity', 'due_date'], name='ix_sales_hdr_duedt'),
        ),
        migrations.AddIndex(
            model_name='salesinvoiceheader',
            index=models.Index(fields=['entity', 'entityfinid', 'subentity', 'doc_type', 'doc_code', 'doc_no'], name='ix_sales_hdr_nav'),
        ),
        migrations.AddIndex(
            model_name='salesinvoiceheader',
            index=models.Index(fields=['entity', 'entityfinid', 'subentity', 'status'], name='ix_sales_hdr_status'),
        ),
        migrations.AddIndex(
            model_name='salesinvoiceheader',
            index=models.Index(fields=['entity', 'entityfinid', 'subentity', 'customer'], name='ix_sales_hdr_customer'),
        ),
        migrations.AddIndex(
            model_name='salesinvoiceheader',
            index=models.Index(fields=['entity', 'entityfinid', 'subentity', 'gst_compliance_mode'], name='ix_sales_hdr_gstmode'),
        ),
        migrations.AddConstraint(
            model_name='salesinvoiceheader',
            constraint=models.UniqueConstraint(fields=('entity', 'entityfinid', 'subentity', 'doc_type', 'doc_code', 'doc_no'), name='uq_sales_hdr_scope_docno'),
        ),
        migrations.AddConstraint(
            model_name='salesinvoiceheader',
            constraint=models.UniqueConstraint(fields=('entity', 'entityfinid', 'subentity', 'doc_type', 'doc_code', 'invoice_number'), name='uq_sales_hdr_scope_invoiceno'),
        ),
        migrations.AddIndex(
            model_name='salesewayevent',
            index=models.Index(fields=['eway', 'event_at'], name='ix_sales_eway_ev_eway_dt'),
        ),
        migrations.AddIndex(
            model_name='salesewayevent',
            index=models.Index(fields=['entity', 'entityfinid', 'subentity', 'event_type'], name='ix_sales_eway_ev_type'),
        ),
        migrations.AddIndex(
            model_name='salesewayevent',
            index=models.Index(fields=['entity', 'entityfinid', 'subentity', 'eway_bill_no'], name='ix_sales_eway_ev_no'),
        ),
        migrations.AddIndex(
            model_name='salesewaybilldetails',
            index=models.Index(fields=['header'], name='ix_sales_eway_hdr'),
        ),
        migrations.AddIndex(
            model_name='salesewaybilldetails',
            index=models.Index(fields=['entity', 'entityfinid', 'subentity', 'status'], name='ix_sales_eway_status'),
        ),
        migrations.AddIndex(
            model_name='salesewaybilldetails',
            index=models.Index(fields=['entity', 'entityfinid', 'subentity', 'eway_bill_no'], name='ix_sales_eway_no'),
        ),
        migrations.AddIndex(
            model_name='saleseinvoicedetails',
            index=models.Index(fields=['header'], name='ix_sales_einv_hdr'),
        ),
        migrations.AddIndex(
            model_name='saleseinvoicedetails',
            index=models.Index(fields=['entity', 'entityfinid', 'subentity', 'status'], name='ix_sales_einv_status'),
        ),
        migrations.AddIndex(
            model_name='saleseinvoicedetails',
            index=models.Index(fields=['entity', 'entityfinid', 'subentity', 'irn'], name='ix_sales_einv_irn'),
        ),
        migrations.AddIndex(
            model_name='saleschoiceoverride',
            index=models.Index(fields=['entity', 'subentity', 'choice_group'], name='ix_sales_choice_override_scope'),
        ),
        migrations.AddConstraint(
            model_name='saleschoiceoverride',
            constraint=models.UniqueConstraint(fields=('entity', 'subentity', 'choice_group', 'choice_key'), name='uq_sales_choice_override_scope'),
        ),
        migrations.AddConstraint(
            model_name='saleschoiceoverride',
            constraint=models.CheckConstraint(check=models.Q(('choice_group__isnull', False), ('choice_key__isnull', False)), name='ck_sales_choice_override_group_key_nn'),
        ),
    ]
